<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="main.css">
    <title>Document</title>
</head>

<body>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="addnews.html">Add News</a></li>
            <!-- <li><a href="#">Services</a></li> -->
        </ul>
    </nav>

    <!-- Slider -->
    <div class="slider">
        <div class="slider-imgs" id="dataimg">

        </div>
        <button class="left">&lt;</button>
        <button class="right">&gt;</button>
    </div>
    <!-- Slider ends -->

    <section>
        <div class="flex-container" id="data">

        </div>


    </section>

    <!-- Slider script -->
    <script>
        fetch('https://64105fcb864814e5b64f9a34.mockapi.io/credo/v1/news', {
            method: 'GET',

        }).then(res => {
            if (res.ok) {
                return res.json();
            }
        }).then(dataimg => {
            console.log(dataimg);
            dataimg.forEach(news => {
                const markup = `
        
            <img style="width: 100%; height:200px" src="${news.avatar}" alt="">
        `;
                document.getElementById('dataimg').insertAdjacentHTML('beforeend', markup);
            });





        })
    </script>
    <!-- Slider script -->

    <script>
        fetch('https://64105fcb864814e5b64f9a34.mockapi.io/credo/v1/news', {
            method: 'GET',
            headers: {
                'content-type': 'application/json'
            },
        }).then(res => {
            if (res.ok) {
                return res.json();
            }
        }).then(data => {
            // Do something with the list of news
            console.log(data);
            data.forEach(news => {
                const markup = `
            <div class="flex-column">
                <img style="width: 100%;" src="${news.avatar}" alt="">
                <h1 style="font-weight:bold">${news.title}</h1>
                <p style="font-weight: bold;">Author: ${news.author}</p>
                
                <p style="font-size:14px; text-align: justify;">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ipsa culpa libero voluptatem provident...</p>
                <br /><hr><br />
                <div style="text-align: center;">
                
                    <button onclick="window.location.assign('singlenews.html?id=${news.id}')" class="btn">View</button> 
                </div> <br /><br /><br /><br /><br /> 
            </div> 
            `;
                document.getElementById('data').insertAdjacentHTML('beforeend', markup);
            });





        }).catch(error => {
            // handle error
            console.log(error);
        })
    </script>

    <script>
        const sliderImages = document.querySelector('.slider-imgs');
        const prevBtn = document.querySelector('.left');
        const nextBtn = document.querySelector('.right');
        let counter = 0;

        function nextSlide() {
            if (counter < 3) {
                counter++;
            } else {
                counter = 0;
            }
            sliderImages.style.transform = `translateX(-${counter * 25}%)`;
        }

        const slideInterval = setInterval(nextSlide, 5000); // change the interval time as per your requirement

        nextBtn.addEventListener('click', () => {
            clearInterval(slideInterval); // stop the automatic slide when the next button is clicked
            nextSlide();
        });

        prevBtn.addEventListener('click', () => {
            clearInterval(slideInterval); // stop the automatic slide when the previous button is clicked
            if (counter > 0) {
                counter--;
            } else {
                counter = 3;
            }
            sliderImages.style.transform = `translateX(-${counter * 25}%)`;
        });
    </script>


    <!-- <div id="news"></div> -->
    <!-- <button id="load-more">Load More News</button> -->


    <script>
        // const newsEL = document.getElementById('news');
        // const loadMoreBtn = document.getElementById('load-more');

        // const loadSomeNews = (numberOfNews = 10) => {
        //     const numberOfNews = 10;
        //     const NEWS_URL = `https://64105fcb864814e5b64f9a34.mockapi.io/credo/v1/news?limit=${numberOfNews}`;
        //     fetch(NEWS_URL)
        //     .then(response => response.json())
        //     .then(responseJson => {
        //     // display details 
        //     for (let { author } of responseJson) {
        //         const NEWSdetails = document.createElement('p');
        //         NEWSdetails.innerText = author;
        //         newsEL.append(NEWSdetails);
        //     } 
        // })
        // }


        // loadMoreBtn.addEventListener('click', () => {
        //     loadSomeNews(3);
        // })
    </script>
</body>

</html>